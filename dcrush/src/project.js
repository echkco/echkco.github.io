window.__require=function t(e,i,s){function o(c,r){if(!i[c]){if(!e[c]){var h=c.split("/");if(h=h[h.length-1],!e[h]){var a="function"==typeof __require&&__require;if(!r&&a)return a(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var m=i[c]={exports:{}};e[c][0].call(m.exports,function(t){return o(e[c][1][t]||t)},m,m.exports,t,e,i,s)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<s.length;c++)o(s[c]);return o}({Flyer:[function(t,e,i){"use strict";cc._RF.push(e,"224594oVoJKaqEZtDkgklVV","Flyer"),cc.Class({extends:cc.Component,properties:{disNum:0},onLoad:function(){},start:function(){},update:function(t){this.game.dead||(this.node.x-=this.game.gameSpeed,this.disNum+=this.game.gameSpeed,this.disNum>=this.game.spikeSpace&&(this.game.spawnSpike(),this.disNum=-9999)),this.game.dead&&this.node.getComponent(cc.Animation).stop()}}),cc._RF.pop()},{}],Gameplay:[function(t,e,i){"use strict";cc._RF.push(e,"8a64bV2LKRKLKgqv+VMxC6l","Gameplay"),cc.Class({extends:cc.Component,properties:{m_spike:cc.Prefab,m_flyer:cc.Prefab,m_player:cc.Node,m_floor1:cc.Node,m_floor2:cc.Node,m_over:cc.Node,m_pause:cc.Node,m_hstscore:cc.Label,m_buttons:cc.Node,m_score:cc.Label,score:0,spikeNum:3,flyerNum:2,spikePos:1e3,spikeSpace:600,gameSpeed:12,triggerX:270,timer:0,dead:!1},onLoad:function(){this.dead=!1,cc.director.getCollisionManager().enabled=!0,this.spikePool=new cc.NodePool,this.flyerPool=new cc.NodePool;for(var t=0;t<this.spikeNum;t++)this.spikePool.put(cc.instantiate(this.m_spike));for(t=0;t<this.flyerNum;t++)this.flyerPool.put(cc.instantiate(this.m_flyer));this.spawnSpike(),this.m_player.getComponent("Player").game=this},getRand:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},onCollisionEnter:function(t,e){111==t.tag?this.desSpike(t.node):222==t.tag&&this.desFlyer(t.node)},desSpike:function(t){this.spikePool.put(t),this.spawnSpike()},desFlyer:function(t){this.flyerPool.put(t),this.spawnSpike()},restart:function(){cc.director.loadScene("gameview")},gmover:function(){this.dead=!0,this.m_player.getComponent(cc.Animation).stop();var t=cc.sys.localStorage.getItem("hst");"undefined"==t&&(cc.sys.localStorage.setItem("hst",0),t=0),this.score>t&&(t=this.score,cc.sys.localStorage.setItem("hst",t)),this.m_over.active=!0,this.m_buttons.active=!1},gmpause:function(){var t=cc.sys.localStorage.getItem("hst");"undefined"==t&&(cc.sys.localStorage.setItem("hst",0),t=0),this.score>t&&(t=this.score,cc.sys.localStorage.setItem("hst",t)),this.m_hstscore.string="Highest score: "+t,this.m_pause.active=!0,this.m_buttons.active=!1,cc.director.pause()},gmcontinue:function(){cc.director.resume(),this.m_pause.active=!1,this.m_buttons.active=!0},spawnSpike:function(){if(1!=this.getRand(1,4)){if(0==this.spikePool.size())return;var t=this.spikePool.get();this.node.addChild(t),t.x=this.spikePos+this.getRand(-200,200),t.y=-66,t.getComponent("Spike").game=this}else{if(0==this.flyerPool.size())return;t=this.flyerPool.get();this.node.addChild(t),t.x=this.spikePos+this.getRand(-200,200),t.y=40,t.getComponent("Flyer").game=this}},start:function(){},update:function(t){this.dead||(this.timer+=t,this.timer>=.1&&(this.timer=0,this.score++,this.gameSpeed<=20&&(this.gameSpeed+=.01),this.m_score.string="score: "+this.score),this.m_floor1.x-=this.gameSpeed,this.m_floor2.x-=this.gameSpeed,this.m_floor2.x<=this.triggerX&&(this.m_floor1.x=this.m_floor2.x+3*this.m_floor1.width),this.m_floor1.x<=this.triggerX&&(this.m_floor2.x=this.m_floor1.x+3*this.m_floor1.width))}}),cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"089a6vZhrxPErNVov7+NwTj","Player"),cc.Class({extends:cc.Component,properties:{m_player:cc.Animation,m_buttonA:cc.Button,m_buttonB:cc.Button,jumping:!1,rolling:!1},onLoad:function(){this.jumping=!1,this.rolling=!1,cc.director.getCollisionManager().enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.m_buttonB.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.m_buttonA.node.on(cc.Node.EventType.TOUCH_START,this.onButtonA,this),this.m_buttonB.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.m_buttonB.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},onDestroy:function(){this.m_buttonB.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.m_buttonA.node.off(cc.Node.EventType.TOUCH_START,this.onButtonA,this),this.m_buttonB.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.m_buttonB.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},onCollisionEnter:function(t,e){this.game.dead||(111==t.tag&&(this.onDestroy(),this.game.gmover()),222==t.tag&&(this.onDestroy(),this.game.gmover()))},touchStart:function(){this.rolling||(this.m_player.node.runAction(cc.scaleTo(0,1,1)),this.m_player.play("Roll"),this.rolling=!0,this.jumping=!1,this.m_player.RollDown=function(){-100!=this.m_player.node.y&&this.m_player.node.runAction(cc.moveTo(.1,-300,-100))}.bind(this))},touchEnd:function(){this.rolling&&(this.m_player.play("Run"),this.m_player.node.runAction(cc.scaleTo(0,1.5,1.5)),this.jumping=!1,this.rolling=!1)},onButtonA:function(){this.jumping||(this.rolling&&this.touchEnd(),this.m_player.play("Jump"),this.jumping=!0,this.rolling=!1,this.m_player.Ret=function(){this.m_player.play("Run"),this.jumping=!1,this.rolling=!1}.bind(this))},onKeyDown:function(t){if(!this.game.dead)switch(t.keyCode){case cc.macro.KEY.space:this.onButtonA();break;case cc.macro.KEY.down:this.touchStart();break;case cc.macro.KEY.escape:this.game.m_pause.active?this.game.gmcontinue():this.game.gmpause()}},onKeyUp:function(t){switch(t.keyCode){case cc.macro.KEY.space:if(this.game.dead){this.game.restart();break}break;case cc.macro.KEY.down:if(this.game.dead)break;this.touchEnd()}}}),cc._RF.pop()},{}],Spike:[function(t,e,i){"use strict";cc._RF.push(e,"ff1819sDr1MGLf0zmmpUnAi","Spike"),cc.Class({extends:cc.Component,properties:{disNum:0},onLoad:function(){},start:function(){},update:function(t){this.game.dead||(this.node.x-=this.game.gameSpeed,this.disNum+=this.game.gameSpeed,this.disNum>=this.game.spikeSpace&&(this.game.spawnSpike(),this.disNum=-9999))}}),cc._RF.pop()},{}]},{},["Flyer","Gameplay","Player","Spike"]);